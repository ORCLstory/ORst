# リファクタリング
- commandQueue関連が見づらすぎる
    - target.status.some(function())が見づらい
- 非同期処理を含めたAllyStatusやEnemyStatusが見づらい
- ダメージ計算についても静的メソッドにしていいかも

## battleSystem

1. 全滅判定
1. カーソル、コマンドキューの初期化
1. 味方の行動を選択させる(すべての味方が選択するまで)
    - 決定していたらキューを追加する。
    - キャンセルしていたら最後のキューを削除
1. カーソルの位置の初期化

1. 敵AIの行動を決定

1. カーソルをコマンドライン用に初期化

1. コマンドキューを順番に処理していく
    - キャラクターが行動不能な場合、次のキャラクターに行動させる
    - 対象が選択不能な場合、対象を変える
    1. ダメージ計算
        - 対象にダメージを与える
        - 状態に応じてログを出力する
        - ステータスウィンドウ描画の更新
    1. 行動可能リストの更新
    1. 全滅判定

1. カーソルの初期化


## 味方を回復出来ない
1. ターゲット選択が完全に敵専用になってる。
1. ついでに味方にも攻撃出来るからそれ用に書き直さないといけない
1. systemはローカルなので参照出来ない。
    - グローバルにする？
    - 

## 道具をどうやって実装するか
- 回復(薬草とか)
    - 毒消し系
    - HP回復系
    - MP回復系
- 敵にダメージを与えるもの
- 装備
- 

## 始まりからの処理

1. タイトル画面からスタートする
1. マップ画面で自由探索
    1. 歩いているとランダムエンカウントする
    1. 戦闘が始まる
    1. 戦闘が終わるとマップ画面に戻る

### 考えないと行けないもの
- 画面の描画
- カーソルの位置
- カーソルの動きに応じた処理

## 
